I"¦<h1 id="0312-til">0312 TIL</h1>

<p>Created By: ì„±í¬ ë°°
Last Edited: Mar 12, 2020 11:29 PM</p>

<p><img width="316" alt="_2020-03-12__11 11 24" src="https://user-images.githubusercontent.com/41617388/76532186-9af9a200-64b9-11ea-8f18-372ea1671d8b.png" /></p>

<ul>
  <li>ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ, ë‘ ê°œë¥¼ í•œë²ˆì— ë°›ì•„ì˜¤ë‹¤ ë³´ë‹ˆ ë™ê¸°í™”ê°€ ì•ˆë¼ì„œ í•œê°œë§Œ ë°›ì•„ì™€ì§€ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤.</li>
</ul>

<blockquote>
  <p>ê¸°ì¡´ ì½”ë“œ</p>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">Restriction</span><span class="p">.</span><span class="nx">countDocuments</span><span class="p">({</span><span class="na">state</span> <span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">cnt</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">prohibitions</span> <span class="o">=</span> <span class="nx">cnt</span>
     <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">Restriction</span><span class="p">.</span><span class="nx">countDocuments</span><span class="p">({</span><span class="na">state</span> <span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">cnt</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">restrictions</span> <span class="o">=</span> <span class="nx">cnt</span>
     <span class="p">})).</span><span class="nx">then</span><span class="p">(()</span><span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">ret</span><span class="p">))</span>
</code></pre></div>  </div>
  <ul>
    <li>.then()ìœ¼ë¡œ ê°ì‹¸ë‹¤ ë³´ë‹ˆ í•œ ê°œë§Œ ë³´ë‚´ì§€ê³ .. ë‚œë¦¬</li>
  </ul>
</blockquote>

<blockquote>
  <p>ë³€ê²½ ì½”ë“œ
```javascript
    async function fetch(){
        const prohibitions = await Restriction.countDocuments({state : 0})
        const restrictions = await Restriction.countDocuments({state : 1})</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    res.send({
      restrictions : restrictions,
      prohibitions : prohibitions
    })
 } ``` - í•´ê²° ë°©ë²•ì´ ì—†ì„ê¹Œ ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ async/awaitì´ ìˆì–´ ì‚¬ìš©í•´ ë´¤ë‹¤! - ì½”ë“œë„ í›¨ì”¬ ê°€ì‹œì ì´ê³ , ë°ì´í„°ë„ ë„ˆë¬´ ì˜ ë³´ë‚´ì§ ğŸ‘
</code></pre></div></div>

<h2 id="asyncawait-ê³¼-promise">Async/await ê³¼ Promise</h2>

<h3 id="promise">Promise?</h3>

<ul>
  <li>.then().then()â€¦</li>
  <li>í•¨ìˆ˜ í˜¸ì¶œ (resolveë¼ê³  í•˜ë‚˜ë´„) ì´í›„ then()ì— ê±¸ë¦° í•¨ìˆ˜ ì‹¤í–‰</li>
</ul>

<h3 id="asyncawait">Async/await</h3>

<ul>
  <li>async í•¨ìˆ˜(), await í•¨ìˆ˜()</li>
  <li>awaitì€ asyncê°€ resolve ëœ ì´í›„ ì‹¤í–‰</li>
</ul>

<h3 id="ê·¸ë˜ì„œ-promiseë³´ë‹¤-asyncê°€-ë‚˜ì€-ì´ìœ ">ê·¸ë˜ì„œ Promiseë³´ë‹¤ Asyncê°€ ë‚˜ì€ ì´ìœ ?</h3>

<ul>
  <li>ë™ê¸°ì  ì½”ë“œ íë¦„ìœ¼ë¡œ ê°œë°œì´ ê°€ëŠ¥</li>
  <li>ì½”ë“œê°€ ê°„ê²°í•´ì§€ê³ , ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤</li>
  <li>ì‘ë‹µë°ì´í„° (err, data, res ë“±)ë¥¼ ì—†ì•¨ ìˆ˜ ìˆìŒ</li>
  <li>Promise ì‚¬ìš© ì‹œ ì½œë°± ë‚´ëŠ” ë™ê¸°í™” ê°€ëŠ¥í•˜ì§€ë§Œ, ë°–ì˜ í•¨ìˆ˜ëŠ” ë™ê¸°í™” ë¶ˆê°€</li>
</ul>

<hr />

<ul>
  <li>ê²€ìƒ‰ í•´ë³´ë‹ˆ Promise.allì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ê°œë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆì—ˆë‹¤..ã…ã…ã…! ê²€ìƒ‰ ë¶€ì¡±ì´ì—ˆë˜ê±¸ë¡œ..</li>
</ul>
:ET