---
title: "[TIL] Promise, Async/await"
date: 2020-03-12
categories: til
---
# 0312 TIL

Created By: ì„±í¬ ë°°
Last Edited: Mar 12, 2020 11:29 PM

<img width="316" alt="_2020-03-12__11 11 24" src="https://user-images.githubusercontent.com/41617388/76532186-9af9a200-64b9-11ea-8f18-372ea1671d8b.png">

- ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ, ë‘ ê°œë¥¼ í•œë²ˆì— ë°›ì•„ì˜¤ë‹¤ ë³´ë‹ˆ ë™ê¸°í™”ê°€ ì•ˆë¼ì„œ í•œê°œë§Œ ë°›ì•„ì™€ì§€ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤.

> ê¸°ì¡´ ì½”ë“œ
```javascript
    Restriction.countDocuments({state : 0}, (err, cnt)=>{
        ret.prohibitions = cnt
     }).then(Restriction.countDocuments({state : 1}, (err, cnt)=>{
        ret.restrictions = cnt
     })).then(()=> res.send(ret))
```
- .then()ìœ¼ë¡œ ê°ì‹¸ë‹¤ ë³´ë‹ˆ í•œ ê°œë§Œ ë³´ë‚´ì§€ê³ .. ë‚œë¦¬

> ë³€ê²½ ì½”ë“œ
```javascript
    async function fetch(){
        const prohibitions = await Restriction.countDocuments({state : 0})
        const restrictions = await Restriction.countDocuments({state : 1})
    
        res.send({
          restrictions : restrictions,
          prohibitions : prohibitions
        })
     }
     
```
- í•´ê²° ë°©ë²•ì´ ì—†ì„ê¹Œ ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ async/awaitì´ ìˆì–´ ì‚¬ìš©í•´ ë´¤ë‹¤!
- ì½”ë“œë„ í›¨ì”¬ ê°€ì‹œì ì´ê³ , ë°ì´í„°ë„ ë„ˆë¬´ ì˜ ë³´ë‚´ì§ ğŸ‘

## Async/await ê³¼ Promise

### Promise?

- .then().then()...
- í•¨ìˆ˜ í˜¸ì¶œ (resolveë¼ê³  í•˜ë‚˜ë´„) ì´í›„ then()ì— ê±¸ë¦° í•¨ìˆ˜ ì‹¤í–‰

### Async/await

- async í•¨ìˆ˜(), await í•¨ìˆ˜()
- awaitì€ asyncê°€ resolve ëœ ì´í›„ ì‹¤í–‰

### ê·¸ë˜ì„œ Promiseë³´ë‹¤ Asyncê°€ ë‚˜ì€ ì´ìœ ?

- ë™ê¸°ì  ì½”ë“œ íë¦„ìœ¼ë¡œ ê°œë°œì´ ê°€ëŠ¥
- ì½”ë“œê°€ ê°„ê²°í•´ì§€ê³ , ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤
- ì‘ë‹µë°ì´í„° (err, data, res ë“±)ë¥¼ ì—†ì•¨ ìˆ˜ ìˆìŒ
- Promise ì‚¬ìš© ì‹œ ì½œë°± ë‚´ëŠ” ë™ê¸°í™” ê°€ëŠ¥í•˜ì§€ë§Œ, ë°–ì˜ í•¨ìˆ˜ëŠ” ë™ê¸°í™” ë¶ˆê°€

---

- ê²€ìƒ‰ í•´ë³´ë‹ˆ Promise.allì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ê°œë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆì—ˆë‹¤..ã…ã…ã…! ê²€ìƒ‰ ë¶€ì¡±ì´ì—ˆë˜ê±¸ë¡œ..